language: go

go:
  - 1.10.x
  - master

os:
  - linux
  - osx

services:
  - postgresql

env:
  - GO111MODULE=on PGPORT=5432 PGUSER=user PGPASSWORD=pass PGDATABASE=test

install:
  - go install

script:
  - go test -v .
  - go build -ldflags "-s -w" -o "psql-rest" ./example/main.go